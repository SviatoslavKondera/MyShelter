@using Data_Access_Layer.Entities
@using Microsoft.AspNetCore.Identity
@using System.Security.Claims;

@model IEnumerable<Data_Access_Layer.Entities.Category>
@inject SignInManager<ApplicationUser> signInMahager;

@inject UserManager<ApplicationUser> userManager;
@{
    ViewData["Title"] = "Manage Categoty";
    Layout = "_Layout-2";

}


<div class="manage course content">
  
    

     

     


    @{
        @if(signInMahager.IsSignedIn(User)){
         <a class="btn btn-primary text-white" asp-controller="Category" asp-action="Create">Додати категорію</a>
     }

        int num = 0;
        foreach(var cat in Model)
        {
            num++;
 <div class="courseDetails d-flex flex-row" style="width:74%;border-width:1px;">
    <img class="ShelterFirstSqImg" src="~/Images/@cat.Image" />
    <div class="d-flex flex-column"  style="">
  <div class="p-0"><h2 class="CourseName "><b>@cat.name</b></h2></div>
  <div class="p-1">@cat.description</div>
  <div class="d-flex flex-row">


                        @if(signInMahager.IsSignedIn(User) && User.IsInRole("SimpleUser"))
                        {
                            @if (userManager.GetUserId(User) == cat.UserId )
                        {
                            <div class=" d-flex p-1 align-self-end" style="margin-bottom:12px;">
      <a class="btn btn-primary text-white" asp-controller="Category" asp-action="Edit" role="button" asp-route-id="@cat.id" >Редагувати</a>
       <a class="btn btn-primary text-white" asp-controller="Category" asp-action="Delete" role="button" asp-route-id="@cat.id"  style="margin-left:10px;">Видалити</a>
  </div>
                        }
                        }
                        @if(signInMahager.IsSignedIn(User) && User.IsInRole("Admin"))
                        {
                            
                        
                            <div class=" d-flex p-1 align-self-end" style="margin-bottom:12px;">
      <a class="btn btn-primary text-white" asp-controller="Category" asp-action="Edit" role="button" asp-route-id="@cat.id" >Редагувати</a>
       <a class="btn btn-primary text-white" asp-controller="Category" asp-action="Delete" role="button" asp-route-id="@cat.id"  style="margin-left:10px;">Видалити</a>
  </div>
                        
                        }



                        
  
  
</div>

</div>
  
</div>
        }
    }

    
</div>